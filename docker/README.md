# Demo Deployment Steps
This a reproducable process for dev deployment. - Everything here is set up to be run from the project root.  

###
`sudo ./docker/deploy.sh` will build and tag a docker image, interpolate some environment variables into the docker-swarm.yaml configuration, and then launch a docker-swarm instance with all of the moving parts. If that runs successfully, you're ready to test. 

### Configure the buffet instance locally for testing the kitchen api 
We have a staging instance live at `https://kitchen-staging.tarbell.mediacloud.org` - this is the default endpoint for the moment, so no dns configuration needed. 


### Test the kitchen

`python buffet.py status` - Shows a table of kitchen subservices with status- should just read "Ready" down the line

`python buffet.py auth` - Interactively establish mediacloud credentials. Asks for your mediacloud Email and API key, and optionally stores them in the environment for ease of use. 

`python buffet.py recipes list` - Display available recipes

`python buffet.py recipes schema keywords` - Summarizes the json schema required by the recipe. 

`python buffet.py recipes start keywords QUERY seltzer COLLECTIONS \["34412234"] START_DATE 2025-05-01 END_DATE 2025-06-01 NAME my_fun_test` - Launches the keyword extraction job, returns some metadata about the task. The "id" field is important for monitoring the run.

`python buffet.py runs inspect $ID` - Shows the current status of the run. Will move from "SCHEDULED" -> "PENDING" -> "RUNNING" -> "COMPLETED" as the process runs. 


`python buffet.py runs artifacts $ID`  - When the run is "COMPLETED", the 'outputs' of the runs will be available here, one of which will be a 'keywords-export' which contains a link to the keywords file that was generated by the run. 